---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      